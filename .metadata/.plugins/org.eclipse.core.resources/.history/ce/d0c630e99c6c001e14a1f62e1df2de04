/*
 * DotMartrix.c
 *
 *  Created on: Oct 16, 2023
 *      Author: user
 */

#include "DotMartrix.h"

	// PC8 = 1,  PC6 = 2,    PC5 = 3,    PA12 = 4,    PA11 = 5,  PB12 = 6,  PB2 = 7,    PB1 = 8
	// PC9 = 9,  PB8 = 10,  PB9 = 11,  PA6 = 12,    PA7 = 13,   PB6 = 14,  PC7 = 15,  PA9 = 16

	// 9, 14, 8, 12, 1, 7, 2, 5 = PC9, PB6, PB1, PA6, PC8, PB2, PC6, PA11
	// 13, 3, 4, 10, 6, 11, 15, 16 = PA7, PC5, PA12, PB8, PB12, PB9, PC7, PA9

int Dotmartrix_Control[8][8] = {
	{1, 1, 1, 1, 1, 1, 1, 1},
	{1, 1, 0, 0, 0, 0, 0, 0},
	{1, 1, 0, 0, 0, 0, 0, 0},
	{1, 1, 1, 1, 1, 1, 1, 1},
	{1, 1, 1, 1, 1, 1, 1, 1},
	{1, 1, 0, 0, 0, 0, 0, 0},
	{1, 1, 0, 0, 0, 0, 0, 0},
	{1, 1, 1, 1, 1, 1, 1, 1}

};

void Dotmartrix_ALLON(){
	  HAL_GPIO_WritePin(GPIOA, P6 | P11 , GPIO_PIN_SET);
	  HAL_GPIO_WritePin(GPIOB, P6 | P2 | P1, GPIO_PIN_SET);
	  HAL_GPIO_WritePin(GPIOC, P9 | P8 | P6 , GPIO_PIN_SET);
	  HAL_GPIO_WritePin(GPIOA, P7 | P12 | P9 , GPIO_PIN_RESET);
	  HAL_GPIO_WritePin(GPIOB, P8 | P12 | P9 , GPIO_PIN_RESET);
	  HAL_GPIO_WritePin(GPIOC, P5 | P7, GPIO_PIN_RESET);
}

//PC9, PB6, PB1, PA6, PC8, PB2, PC6, PA11
//PA7, PC5, PA12, PB8, PB12, PB9, PC7, PA9

void Control_E(void) {
	for(int Row = 0; Row < 8; Row++){
		if(Row == 0){
			PCS9;
			PCRS9;
		}
		else if(Row == 1){
			int Count1 = 0;
			PBS6;
			for(int Col1 = 0; Col1 < 8; Col1++){
				if(Dotmartrix_Control[Row][Col1] == 0) {
					Count1 = Count1 + (10^Col1);
					if(Count1 / (10^Col1) == 1){
						if(Col1 == 0) PAS7;
						else if(Col1 == 1) PCS5;
						else if(Col1 == 2) PAS12;
						else if(Col1 == 3) PBS8;
						else if(Col1 == 4) PBS12;
						else if(Col1 == 5) PBS9;
						else if(Col1 == 6) PCS7;
						else if(Col1 == 7) PAS9;
					}
				}
				PARS7;
				PCRS5;
				PARS12;
				PBRS8;
				PBRS12;
				PBRS9;
				PCRS7;
				PARS9;
			}
			PBRS6;
		}
	}
}
